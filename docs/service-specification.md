# DAO Document Platform - サービス仕様書

**バージョン**: v2.0.0
**最終更新**: 2026-02

> **デモサイト**: https://dao-doc-platform-demo.vercel.app/
>
> **注意**: 本デモは **Ethereum Sepolia テストネット**上で動作します。**アルファ版**のため、ご利用は自己責任でお願いします。

> 技術実装の詳細は [architecture.md](./architecture.md) を参照。

---

## 1. 背景と課題

### 1.1 合同会社型 DAO の位置づけ

合同会社型 DAO は、オンチェーンの議決をオフチェーン（実社会）に反映するための**契約主体かつビークル**として存在する。トークン保有者によるオンチェーンガバナンスと、合同会社としての法的行為能力を橋渡しする存在である。

この構造において、以下の2つの根本的な課題が存在する。

### 1.2 課題 1: オンチェーン議決とオフチェーン文書の信頼性ギャップ

多くのオンチェーン議決は、それ単体では実社会での効力を持たない。定款の変更、業務執行の委任、資産の処分といった意思決定は、オンチェーンでの議決に加えて、定款・契約書・議事録などのオフチェーン文書と組み合わせることで初めて法的効力を持つ。

スマートコントラクトがオンチェーンで改ざん不可能であっても、その議決に基づいて作成・改定されるオフチェーン文書が改ざん可能な状態にあれば、ガバナンスの信頼性は根本から損なわれる。

**→ 本サービスは、オフチェーン文書の真正性をブロックチェーン上で証明することで、オンチェーン議決からオフチェーン執行までの信頼チェーンを完成させる。**

### 1.3 課題 2: DAO 横断のドキュメント参照性の欠如

現状、各 DAO のオフチェーン文書（定款、規程、議事録等）には共通の保存方法・公開方法が存在しない。文書は各 DAO の管理者が独自に管理しており、DAO への参加を検討するユーザーが、その DAO のガバナンス文書を事前に確認・検証する手段がない。

結果として、ユーザーは DAO の運営実態を把握できず、安心して参加・出資する判断ができない。

**→ 本サービスは、DAO のオフチェーン文書に対する共通のドキュメント管理フレームワークを提供し、誰でもアクセス・検証可能な形で公開する。**

### 1.4 課題 3: 公開情報の実質的な理解不可能性

課題1・2が解決され、すべての文書が公開・検証可能になったとしても、定款・規程・契約書の内容は技術的・法的に高度であり、多くのユーザーにとって実質的に理解が困難である。文書が読めなければ、公開されていても透明性は機能しない。

また、DAO の意思決定プロセスを追跡するには、「ある契約がどの定款・規程に基づき、どの投票によって決議されたか」を文書間の関係を辿って把握する必要があるが、これを人手で行うのは現実的でない。

**→ 将来フェーズにおいて、AI による文書理解サポート機能を追加し、公開情報の実質的なアクセシビリティを確保する。**

---

## 2. サービス概要

DAO Document Platform は、上記の課題を解決するための Web プラットフォームである。

合同会社型 DAO が作成・管理する定款・規程・議事録などの公式文書を、ブロックチェーン上で証明し、誰でも検証できる形で公開する。文書のハッシュ値と所在情報を Ethereum のアテステーション（証明）として記録することで、「いつ・誰が・どの文書を登録したか」を改ざん不可能な形で保証する。

### ミッション

オンチェーンガバナンスとオフチェーン文書の信頼性を接続し、合同会社型 DAO の透明性と信頼性を技術的に検証可能な形で社会に提供する。

### 公共財としての位置づけ

本サービスは、特定の DAO や企業のためのプロダクトではなく、DAO エコシステム全体の信頼基盤となる**公共財（Public Goods）**として開発・運営する。

- **オープンソース**: ソースコードは MIT License で公開し、誰でも利用・改変・再配布できる
- **オープンアクセス**: 文書の閲覧・検証機能にアカウントや課金を設けない
- **共有インフラ**: 登録 DAO が増えるほどエコシステム全体の透明性が向上する、ネットワーク効果を持つ共有基盤として機能する

### 持続可能性モデル

公共財としての性質上、ユーザー課金ではなく、エコシステム拡大を目的とする組織・財団からのインフラ出資を資金調達の軸とする。

本サービスの成長（＝登録 DAO の増加・文書管理基盤の普及）は、出資者が推進する「合同会社型 DAO の普及」や「オンチェーン技術の社会実装」と構造的に一致するため、利益相反のないファンディングモデルとなる。

**想定する出資元:**

- **ブロックチェーン財団・プロトコル**: EAS の実用的ユースケースとして、また日本における法的枠組みとブロックチェーンの接続事例として
- **Public Goods 資金分配メカニズム**: Gitcoin Grants、Optimism RetroPGF 等の既存エコシステム
- **DAO エコシステムの拡大を推進する組織**: 合同会社型 DAO の設立・運営を支援する法律事務所・コンサルティング企業など、自社クライアント向けインフラとして

### 本サービスが実現すること

| 領域               | 課題                                                            | 解決策                                                                      |
| ------------------ | --------------------------------------------------------------- | --------------------------------------------------------------------------- |
| 信頼チェーンの完成 | オンチェーン議決の先にあるオフチェーン文書が改ざん可能          | 文書ハッシュをオンチェーンに記録し、誰でも原本との一致を検証可能にする      |
| 存在証明           | 「この文書がいつ存在したか」を第三者に示す手段がない            | アテステーションのタイムスタンプにより、登録時刻がオンチェーンで証明される  |
| 共通フレームワーク | 各 DAO の文書に共通の保存・公開手段がなく、参加者が確認できない | DAO 横断で統一されたドキュメント管理・公開の仕組みを提供する                |
| 文書の永続化       | 文書が管理者のローカル環境にしか存在しない                      | IPFS による分散ストレージで可用性を確保し、CID で永続的にアクセス可能にする |
| 改定の追跡         | 文書の改定履歴が追えない                                        | バージョンチェーンにより、改定履歴をオンチェーンで辿れるようにする          |

---

## 3. 対象ユーザー

### 3.1 DAO 運営者（管理者）

- 合同会社型 DAO の代表社員・業務執行社員
- DAO の設立登録、文書の登録・管理・失効を行う
- MetaMask ウォレットが必要

### 3.2 DAO 関係者（閲覧者）

- DAO のメンバー、出資者、取引先
- 登録済み文書の閲覧・ダウンロード・真正性検証を行う
- アカウント不要で利用可能

### 3.3 一般閲覧者

- DAO に関心のある第三者（投資家、規制当局、研究者など）
- DAO 一覧の閲覧、公開文書の検証を行う
- アカウント不要で利用可能

---

## 4. 主要機能

### 4.1 DAO 管理

| 機能           | 説明                                                                                   | 必要な権限                |
| -------------- | -------------------------------------------------------------------------------------- | ------------------------- |
| DAO 登録       | DAO の基本情報をブロックチェーンに記録し、プラットフォーム上に公開する                 | ウォレット接続 + ログイン |
| DAO 情報編集   | 説明文、所在地、ロゴなどの付加情報を更新する                                           | 管理者のみ                |
| DAO 非活性化   | DAO を非活性化し公開一覧から非表示にする。EAS アテステーションはオンチェーンで残存する | 管理者のみ                |
| DAO 一覧・検索 | 登録済み DAO を一覧表示し、詳細を確認する                                              | 不要                      |
| My DAO         | 自分が管理する DAO の一覧と管理画面（非活性化 DAO も表示）                             | ウォレット接続 + ログイン |

### 4.2 文書管理

| 機能             | 説明                                                                       | 必要な権限              |
| ---------------- | -------------------------------------------------------------------------- | ----------------------- |
| 文書登録         | ファイルをアップロードし、ハッシュ値・所在情報をブロックチェーンに記録する | 管理者 + ウォレット接続 |
| 文書一覧         | DAO に紐付く文書をタイプ別に一覧表示する                                   | 不要                    |
| 文書検証         | 手元のファイルのハッシュ値をオンチェーン記録と照合し、真正性を確認する     | 不要                    |
| 文書失効         | 登録済み文書を失効（revoke）し、無効化する                                 | 管理者 + ウォレット接続 |
| 文書ダウンロード | IPFS からオリジナルファイルを取得する                                      | 不要                    |

### 4.3 バージョン管理

| 機能             | 説明                                                     |
| ---------------- | -------------------------------------------------------- |
| バージョン履歴   | 文書の改定履歴をタイムラインで表示する                   |
| 新バージョン登録 | 既存文書の改定版を、前バージョンとの関連を保って登録する |
| バージョン比較   | 2つのバージョン間のメタデータの差異を確認する            |

### 4.4 投票議題管理

| 機能                     | 説明                                                                                                   |
| ------------------------ | ------------------------------------------------------------------------------------------------------ |
| 投票議題登録             | 議案書を投票トランザクションとオンチェーンで紐付けて登録する（TX ハッシュ・チェーン ID を EAS に記録） |
| トランザクション表示     | 紐付けられた投票トランザクションの情報を表示し、ブロックエクスプローラーへリンクする                   |
| 投票議題フィルター・検索 | ドキュメント一覧で `proposal` タイプによるフィルタリング、トランザクションハッシュによる検索を行う     |

### 4.5 ダッシュボード

管理者向けに、管理 DAO 数・登録文書数・最近のアクティビティ等の統計情報を提供する。

### 4.6 AI による理解サポート [将来フェーズ]

すべての文書が公開・検証可能であっても、技術的・法的に高度な内容を一般のユーザーが理解することは困難である。この課題に対し、以下の機能追加を検討している。

| 機能                   | 説明                                                                                                                          |
| ---------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| 定款・規程の AI 解説   | 登録された定款・規程の内容を AI が平易な言葉で要約・解説する。専門用語の説明や、条項の実務的な意味を提示する                  |
| 意思決定プロセスの追跡 | 特定の契約・執行について、それがどの DAO の定款・規程に基づき、どの投票によって決議されたかを、文書間の関連を辿って可視化する |

---

## 5. 文書の信頼性保証

### 設計原則: オンチェーンアンカリング

本サービスでは、文書の真正性に関わるすべてのデータをブロックチェーン上に固定する。データベース（Firebase）はクエリ高速化のためのキャッシュとしてのみ使用し、Firebase が消失してもシステムの核心機能は動作する。

本サービスは、3つの技術を組み合わせて文書の信頼性を保証する。

```
文書ファイル
  │
  ├─ SHA-256 ハッシュ ──→ ブロックチェーンに記録（改ざん検知）
  │
  ├─ IPFS に保存 ────────→ 分散ストレージで永続化（散逸防止）
  │
  └─ EAS アテステーション → 「誰が・いつ・何を・何の種類を」を証明（存在証明）
```

### 5.1 改ざん検知の仕組み

1. 登録時にファイルの SHA-256 ハッシュ値を計算する
2. ハッシュ値をブロックチェーン上の EAS アテステーションとして記録する
3. 検証時に手元のファイルからハッシュ値を再計算し、オンチェーン記録と照合する
4. 一致すれば原本と同一、不一致であれば改ざんまたは別ファイルと判定する

### 5.2 存在証明と分類証明の仕組み

- EAS アテステーションにはブロックチェーンのタイムスタンプが記録される
- このタイムスタンプは事後的に変更できないため、「その時点でその文書が存在した」ことの証明になる
- アテステーション作成者のウォレットアドレスも記録されるため、「誰が登録したか」も証明される
- **文書タイプ（定款・議事録・投票関連等）もオンチェーンに記録される**ため、文書の分類が事後的に改ざんされることはない

### 5.3 投票との紐付け証明

- 投票関連文書（議案書・投票結果等）には、投票トランザクションのハッシュとチェーン ID がオンチェーンに記録される
- これにより「どの投票によって決議された文書か」が改ざん不可能な形で証明される

### 5.4 可用性の確保

- ファイル本体は IPFS（分散ストレージ）に保存される
- コンテンツ ID (CID) によりファイルの所在が一意に特定される
- 中央サーバーの障害に依存せず、ファイルにアクセスできる

### 5.5 スキーマバージョニングと後方互換

本サービスの証明記録（アテステーション）はブロックチェーン上で不変であるため、証明データの構造（スキーマ）を変更する際は、新しいスキーマを追加デプロイする方式を採る。

- 現行の文書登録は v3 スキーマで記録する（`version` フィールド削除、カテゴリ ID を合同会社型 DAO 準拠に変更）
- v1/v2 で登録された文書の証明は、それぞれのスキーマでオンチェーン上に残存・検証可能
- 現在の実装では v3 スキーマのみをクエリ対象としている（テストデータのみのためマイグレーション不要）
- バージョン番号は `previousVersionId` チェーンの深さから導出し、Firebase キャッシュに保持

---

## 6. 対応する文書タイプ

> 詳細な分類体系は [document-categories.md](./document-categories.md) を参照。

### 規程類（Regulations）

| カテゴリ ID       | 日本語名     | 説明                                                     |
| ----------------- | ------------ | -------------------------------------------------------- |
| `articles`        | 定款         | DAO の最上位規範。組織の目的・構成・基本ルールを定める   |
| `assembly_rules`  | DAO総会規程  | DAO 総会の招集・議決・運営手続きを定める                 |
| `operation_rules` | 運営規程     | 日常の業務運営・役割分担・意思決定プロセスを定める       |
| `token_rules`     | トークン規程 | ガバナンストークンの発行・配布・権利・移転ルールを定める |
| `custom_rules`    | カスタム規程 | 上記に分類されない追加規程                               |

### その他ドキュメント（Other Documents）

| カテゴリ ID | 日本語名 | 説明                                                   |
| ----------- | -------- | ------------------------------------------------------ |
| `proposal`  | 投票議題 | DAO 総会に提出される議案。投票トランザクションと紐づく |
| `minutes`   | 議事録   | DAO 総会・会議の結果を記録する文書                     |

### 対応ファイル形式

PDF のみ（`application/pdf`、上限 10MB/ファイル）

> Phase 0 では PDF のみ。法的文書は PDF が事実上の標準であり、レンダリングの一貫性とハッシュの安定性が保証される。

---

## 7. 利用フロー

### 7.1 DAO 運営者のフロー

```
1. ウォレット接続
   MetaMask でウォレットを接続 → Sepolia ネットワークに切替

3. DAO 登録
   DAO 名（必須）・説明（必須）・所在地等の情報を入力
   → フォームバリデーション → ウォレットで署名 → ブロックチェーンに記録
   → 付加情報（メタデータ）をデータベースに保存

4. 文書登録
   ファイルを選択 → ハッシュ計算 → IPFS アップロード
   → ウォレットで署名 → ブロックチェーンに記録

5. 管理
   ダッシュボードで状況確認、文書の追加登録・失効
```

### 7.2 閲覧者のフロー

```
1. DAO 一覧を閲覧（アカウント不要）

2. DAO の詳細と登録文書を確認

3. 文書の真正性を検証
   手元のファイルをアップロード → ハッシュ値を自動照合 → 結果を表示

4. 文書をダウンロード（IPFS 経由）
```

---

## 8. 認証と権限

本サービスではウォレット接続を唯一の認証手段とする。

| 認証方式       | 用途                                          | 必要な場面                                                |
| -------------- | --------------------------------------------- | --------------------------------------------------------- |
| ウォレット接続 | ログイン状態の管理 + ブロックチェーン操作権限 | My DAO 管理画面、ダッシュボード、DAO 登録、文書登録・失効 |

- 閲覧・検証・ダウンロードには認証不要
- ブロックチェーンへの書き込み（DAO 登録、文書登録、文書失効）にはウォレット接続が必須
- DAO の編集・文書管理は管理者（DAO 登録時のウォレットアドレスと一致）のみ可能
- ウォレットアドレスがユーザーの一意な識別子となる

---

## 9. 利用に必要な環境

| 項目             | 要件                                                                            |
| ---------------- | ------------------------------------------------------------------------------- |
| ブラウザ         | Chrome, Firefox, Edge, Safari（最新版）                                         |
| ウォレット       | MetaMask（DAO 運営者のみ）                                                      |
| テストネット ETH | Sepolia ETH（トランザクション手数料として少額必要、フォーセットで無料取得可能） |
| 閲覧のみ         | 上記不要、ブラウザのみで利用可能                                                |

---

## 10. 制約事項

| 項目           | 現行仕様                          | 将来予定                       |
| -------------- | --------------------------------- | ------------------------------ |
| 対応チェーン   | Ethereum Sepolia テストネットのみ | マルチチェーン対応             |
| 対応ウォレット | MetaMask のみ                     | 複数ウォレット対応             |
| 言語           | 日本語のみ                        | 多言語対応（i18n）             |
| メンバー管理   | 管理者1名のみ                     | ロールベースの複数メンバー管理 |
| 通知           | なし                              | 文書登録・失効時の通知         |

---

## 11. 用語集

| 用語             | 説明                                                                                                                                                 |
| ---------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| DAO              | Decentralized Autonomous Organization（分散型自律組織）。本サービスでは合同会社型 DAO を対象とする                                                   |
| EAS              | Ethereum Attestation Service。Ethereum ブロックチェーン上でデータの証明（アテステーション）を作成・検証するためのプロトコル                          |
| アテステーション | EAS によって作成される証明レコード。作成者、タイムスタンプ、データ内容がオンチェーンに記録される                                                     |
| SHA-256          | 暗号学的ハッシュ関数。ファイルから固定長の値（ハッシュ値）を生成する。同一ファイルからは常に同一のハッシュ値が得られ、ファイルの同一性確認に使用する |
| IPFS             | InterPlanetary File System。P2P ネットワークによる分散ファイルストレージ。ファイルの内容に基づく一意の ID（CID）でアクセスする                       |
| CID              | Content Identifier。IPFS 上のファイルを特定するための一意の識別子                                                                                    |
| ウォレット       | ブロックチェーン上の資産を管理し、トランザクションに署名するためのソフトウェア。本サービスでは MetaMask を使用                                       |
| Sepolia          | Ethereum のテストネットワーク。本番環境（メインネット）と同じ仕組みで動作するが、テスト用の ETH を使用する                                           |
| Gas              | ブロックチェーン上でトランザクションを実行するために必要な手数料                                                                                     |
| 失効（Revoke）   | 登録済みアテステーションを無効化する操作。オンチェーンの記録自体は残るが、失効済みとしてマークされる                                                 |

---

## 関連ドキュメント

| ドキュメント                                         | 内容                                                                     |
| ---------------------------------------------------- | ------------------------------------------------------------------------ |
| [architecture.md](./architecture.md)                 | 技術スタック、ディレクトリ構造、データフロー、API 設計、セキュリティ設計 |
| [document-categories.md](./document-categories.md)   | ドキュメントカテゴリ定義、バージョン管理設計、EAS v3 スキーマ仕様        |
| [v2-requirements.md](./v2-requirements.md)           | v2 機能要件定義、優先度、Alpha スコープ                                  |
| [v1-feature-inventory.md](./v1-feature-inventory.md) | v1 機能棚卸し、v2 での扱い                                               |
