# DAO Document Platform ワークフロー比較

このドキュメントでは、現状のアプリケーションと改善後のワークフローを対比して説明します。

## 📱 一般ユーザー向けワークフロー

### 現状のワークフロー ⚠️ | 改善後のワークフロー ✅

#### 1. DAOの閲覧と探索

⚠️ **現状**:
- トップページからDAO概要確認
- DAO一覧メニューからリスト表示
- キーワード・所在地・規模でのフィルタリング
- DAO詳細ページでの情報確認

✅ **改善後**:
- 変更なし（現状維持）

#### 2. ドキュメントの閲覧と検証

⚠️ **現状**:
- DAO詳細ページからドキュメント選択・閲覧
- 別途「文書検証」メニューに移動して検証
- アテステーションUIDを手動入力
- 検証したいファイルを別途アップロード
- IPFSから別途ダウンロード

✅ **改善後**:
- DAO詳細ページのドキュメントリストに統合
- 各ドキュメントに「検証」ボタンを直接設置
- クリック一つで文書ハッシュとブロックチェーン記録を比較
- 同じ画面で検証結果を表示
- ダウンロードボタンも同じインターフェースに統合

#### 3. ウォレット接続

⚠️ **現状**:
- 一般ユーザーもウォレット接続が必要
- MetaMask接続手順を実施
- 接続状態の確認とネットワーク切替

✅ **改善後**:
- **削除** - 一般ユーザーはウォレット接続不要
- ウォレット接続機能はDAO運営者向けのみに移動

#### 4. ハッシュテスト

⚠️ **現状**:
- 別メニュー「ハッシュテスト」でファイルハッシュ計算
- 計算されたハッシュ値を確認・コピー

✅ **改善後**:
- ドキュメント検証機能に統合
- ドキュメントリスト画面で直接ハッシュ計算と検証を実行

## 🏢 DAO運営者向けワークフロー

### 現状のワークフロー ⚠️ | 改善後のワークフロー ✅

#### 1. DAO登録・管理

⚠️ **現状**:
- 「DAO登録」メニューから登録
- MetaMaskウォレット接続なし
- 管理画面から情報編集
- 管理者アカウント設定

✅ **改善後**:
- MetaMaskウォレット接続を追加
- 「ウォレット接続」ボタンを設置
- 接続状態の確認とネットワーク切替機能を追加
- その他は変更なし

#### 2. ドキュメント管理

⚠️ **現状**:
- 管理画面からドキュメント追加
- GitHubのドキュメントURLを手動入力
- MetaMask署名やIPFS・ブロックチェーン連携なし
- バージョン管理・削除/アーカイブ

✅ **改善後**:
- 管理画面からドキュメント追加（ファイルアップロード方式）
- MetaMask署名
- IPFS・ブロックチェーン処理（アテステーション）
- バージョン管理・削除/アーカイブ

#### 3. アテステーション管理

⚠️ **現状**:
- アテステーション一覧確認
- 個別検証機能

✅ **改善後**:
- 変更なし（現状維持）

#### 4. IPFS管理

⚠️ **現状**:
- アップロードされたファイル管理
- CIDとゲートウェイURL確認
- ファイルダウンロード

✅ **改善後**:
- 変更なし（現状維持）

## 💻 技術フローの変更点

### 文書検証の技術的フロー

⚠️ **現状**:
- 別画面でのアテステーションUID入力
- 検証対象ファイルの別途アップロード
- 別プロセスでの検証実行

✅ **改善後**:
- ドキュメントリスト表示から直接検証を実行
- アテステーションUIDを自動取得
- 検証プロセスを単一インターフェースに統合
- UXの向上（クリック数の削減）

## 🔄 必要な変更まとめ

### コード修正ポイント

1. **一般ユーザー向けウォレット接続機能の削除**
   - 関連するUIコンポーネントの削除または非表示化
   - ウォレット接続を条件とする処理の見直し

2. **ドキュメントリスト画面の機能拡張**
   - 各ドキュメント項目に「検証」ボタン追加
   - 検証ロジックの統合
   - 検証結果表示コンポーネントの追加

3. **ハッシュテスト機能の統合**
   - 独立したハッシュテスト画面の処理をドキュメントリスト画面に統合
   - UIの簡素化

4. **DAO運営者向けウォレット接続の明確化**
   - 管理画面でのウォレット接続コンポーネント追加
   - 接続状態の可視化 

## 📋 実装ロードマップ

以下はワークフロー変更の実装に向けたロードマップです。タスクは優先順位順に並べられています。

### フェーズ1: 基本構造の変更

1. **コードベース調査**
   - ✅ 現在のファイル構造とコンポーネントの把握
   - ✅ 変更が必要な箇所の特定
   - ✅ 必要なコンポーネントの設計

2. **ウォレット接続機能の調整**
   - ✅ ナビゲーションバーからウォレット接続UIを削除/移動
   - ✅ 管理者画面専用のウォレット接続コンポーネント作成
   - ✅ 権限区分に基づく条件付きレンダリング実装

### フェーズ2: ドキュメント関連機能の統合

3. **ドキュメントリスト拡張**
   - ✅ ドキュメントリストコンポーネントの修正
   - ✅ 各ドキュメント項目に検証ボタン追加
   - ✅ ダウンロード機能の統合

4. **検証ロジックの統合**
   - ✅ 文書検証機能のロジック抽出と再利用
   - ✅ ハッシュ計算機能の統合
   - ✅ EASアテステーションUID自動取得ロジック実装

5. **UI/UX改善**
   - ✅ 検証結果表示コンポーネント作成
   - ✅ 進行状況とフィードバックメカニズム実装
   - ⬜️ エラーハンドリングの改善

### フェーズ3: 最適化と完了

6. **テストと不具合修正**
   - ⬜️ 各機能の単体テスト
   - ⬜️ 統合テスト
   - ⬜️ ユーザーフローの確認

7. **不要コードの整理**
   - ⬜️ 独立したハッシュテスト画面の削除
   - ⬜️ 一般ユーザー向けウォレット接続関連コードの整理
   - ⬜️ 未使用コンポーネント・関数の削除

8. **ドキュメント管理機能の修正**
   - ⬜️ EditDocumentModalコンポーネントにファイルアップロード機能追加
   - ⬜️ FileUploaderコンポーネントの統合
   - ⬜️ ハッシュ計算とアテステーション作成機能の追加
   - ⬜️ ウォレット連携の強化

9. **ドキュメント更新**
   - ✅ ユーザーガイド更新
   - ⬜️ 開発者向けドキュメント更新
   - ⬜️ コメントの整理と改善

### 予定マイルストーン

- **フェーズ1完了**: ✅ 一般ユーザーとDAO運営者の役割区分の明確化
- **フェーズ2完了**: ✅ 統合された機能的なドキュメント管理インターフェース
- **フェーズ3完了**: ⬜️ 最適化されたアプリケーションとクリーンなコードベース
- **追加フェーズ**: ⬜️ ドキュメント管理とブロックチェーン連携の完全実装

各タスクは以下のステータスでマークされます:
- ✅ 完了
- 🔄 進行中
- ⬜️ 未着手 